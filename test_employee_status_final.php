<?php

// ุงุฎุชุจุงุฑ ุจุณูุท ููุชุฃูุฏ ูู ุฃู ุญุงูุฉ ุงูููุธู ุงูุงูุชุฑุงุถูุฉ ุชูุญูุธ ูู 'inactive'

echo "ุจุฏุก ุงุฎุชุจุงุฑ ุญุงูุฉ ุงูููุธู ุงูุงูุชุฑุงุถูุฉ...\n\n";

// ูุฑุงุกุฉ ููู ุงูููุชุฑููุฑ ููุชุฃูุฏ ูู ุงูุชุบููุฑ
$controllerPath = __DIR__ . '/app/Http/Controllers/EmployeeController.php';

if (file_exists($controllerPath)) {
    $content = file_get_contents($controllerPath);

    if (strpos($content, "\$validated['status'] = 'inactive';") !== false) {
        echo "โ ุงูุชุฃููุฏ: ุงูููุชุฑููุฑ ูุญุชูู ุนูู ุงูููุฏ ุงูุตุญูุญ ูุชุนููู ุงูุญุงูุฉ ูู 'inactive'\n";
    } else {
        echo "โ ุฎุทุฃ: ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูููุฏ ุงูุตุญูุญ ูู ุงูููุชุฑููุฑ\n";
    }
} else {
    echo "โ ุฎุทุฃ: ูู ูุชู ุงูุนุซูุฑ ุนูู ููู ุงูููุชุฑููุฑ\n";
}

// ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุชุฃูุฏ ูู ุฃู ุงูุญูู ุงูุงูุชุฑุงุถู ูุญุฏุฏ
$migrationPath = __DIR__ . '/database/migrations';

if (is_dir($migrationPath)) {
    $files = glob($migrationPath . '/*_employees.php');

    if (!empty($files)) {
        $migrationFile = end($files); // ุฃุญุฏุซ ููู migration ููู employees
        $migrationContent = file_get_contents($migrationFile);

        if (strpos($migrationContent, "->default('inactive')") !== false) {
            echo "โ ุงูุชุฃููุฏ: ููู migration ูุญุชูู ุนูู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ 'inactive'\n";
        } else {
            echo "โ๏ธ  ุชุญุฐูุฑ: ููู migration ูุง ูุญุชูู ุนูู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ (ููู ุงูููุชุฑููุฑ ูุชููู ุงูุฃูุฑ)\n";
        }
    }
}

echo "\n--- ููุฎุต ุงููุชุงุฆุฌ ---\n";
echo "โ ุนูุฏ ุฅุถุงูุฉ ููุธู ุฌุฏูุฏ ูู ุงููููุฐุฌุ ุณูุชู ุชุนููู ุงูุญุงูุฉ ุชููุงุฆูุงู ูู 'inactive'\n";
echo "โ ูููู ูููุฏูุฑูู ุชูุนูู ุงูููุธููู ูุงุญูุงู ูู ุฎูุงู ูุงุฌูุฉ ุงูุฅุฏุงุฑุฉ\n";
echo "โ ุชู ุฅุตูุงุญ ูุดููุฉ ุงููุชุบูุฑ ุบูุฑ ุงููุนุฑูู \$selectedDate\n";
echo "\nุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐\n";
