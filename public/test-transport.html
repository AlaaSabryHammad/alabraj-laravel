<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="test-csrf-token-123456789">
    <title>Test Transport Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
    <div class="p-6">
        <h1 class="text-2xl font-bold mb-6">اختبار صفحة النقل</h1>

        <!-- Test Table -->
        <div class="bg-white rounded-lg shadow overflow-hidden">
            <table class="min-w-full">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-4 py-3 text-right">رقم الرحلة</th>
                        <th class="px-4 py-3 text-right">المركبة</th>
                        <th class="px-4 py-3 text-right">الإجراءات</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="border-b">
                        <td class="px-4 py-4">1</td>
                        <td class="px-4 py-4">أ ب ج 1234</td>
                        <td class="px-4 py-4">
                            <div class="flex items-center gap-2">
                                <button onclick="testButton(1)"
                                        class="text-yellow-600 hover:text-yellow-900 transition-colors"
                                        title="اختبار">
                                    <i class="ri-bug-line"></i>
                                </button>
                                <button onclick="printLoadingSlip(1)"
                                        class="text-purple-600 hover:text-purple-900 transition-colors"
                                        title="طباعة سند التحميل">
                                    <i class="ri-printer-line"></i>
                                </button>
                                <button onclick="viewTransport(1)"
                                        class="text-green-600 hover:text-green-900 transition-colors"
                                        title="عرض التفاصيل">
                                    <i class="ri-eye-line"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    <tr class="border-b">
                        <td class="px-4 py-4">2</td>
                        <td class="px-4 py-4">د هـ و 5678</td>
                        <td class="px-4 py-4">
                            <div class="flex items-center gap-2">
                                <button onclick="testButton(2)"
                                        class="text-yellow-600 hover:text-yellow-900 transition-colors"
                                        title="اختبار">
                                    <i class="ri-bug-line"></i>
                                </button>
                                <button onclick="printLoadingSlip(2)"
                                        class="text-purple-600 hover:text-purple-900 transition-colors"
                                        title="طباعة سند التحميل">
                                    <i class="ri-printer-line"></i>
                                </button>
                                <button onclick="viewTransport(2)"
                                        class="text-green-600 hover:text-green-900 transition-colors"
                                        title="عرض التفاصيل">
                                    <i class="ri-eye-line"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Modal -->
    <div id="transportModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-medium text-gray-900">تفاصيل الرحلة</h3>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="ri-close-line text-xl"></i>
                    </button>
                </div>
                <div id="transportDetails" class="space-y-4">
                    <!-- Transport details will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        function testButton(transportId) {
            console.log('Test button clicked for transport:', transportId);
            alert('زر الاختبار يعمل! رقم الرحلة: ' + transportId);

            // Test CSRF token
            const csrfToken = document.querySelector('meta[name="csrf-token"]');
            if (csrfToken) {
                console.log('CSRF Token found:', csrfToken.getAttribute('content'));
                alert('CSRF Token موجود: ' + csrfToken.getAttribute('content').substring(0, 20) + '...');
            } else {
                console.log('CSRF Token NOT found');
                alert('CSRF Token غير موجود!');
            }
        }

        function viewTransport(transportId) {
            console.log('ViewTransport called with ID:', transportId);
            alert('دالة العرض تم استدعاؤها للرحلة رقم: ' + transportId);

            // Show modal
            document.getElementById('transportModal').classList.remove('hidden');
            document.getElementById('transportDetails').innerHTML = '<p>تم تحميل تفاصيل الرحلة رقم: ' + transportId + '</p>';
        }

        function printLoadingSlip(transportId) {
            console.log('Print function called with ID:', transportId);
            alert('دالة الطباعة تم استدعاؤها للرحلة رقم: ' + transportId);
        }

        function closeModal() {
            document.getElementById('transportModal').classList.add('hidden');
        }

        // Close modal when clicking outside
        document.getElementById('transportModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>
</html>
